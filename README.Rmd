---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# bulletAnalyzr

<!-- badges: start -->
<!-- badges: end -->

BulletAnalyzr is an innovative tool that integrates advanced 3D imaging technology with sophisticated algorithms to revolutionize bullet analysis in forensics.

## Installation

**Install R** from https://cran.r-project.org/

**Install RStudio** from https://posit.co/download/rstudio-desktop/

**Download bulletAnalyzr**
    
- Go to https://github.com/CSAFE-ISU/bulletAnalyzr
- Click the green Code button and select Download Zip ![](www/readme-download-bulletanalyzr.png)
- Double-click on the downloaded file to unzip it. You may save the unzipped folder anywhere on your computer

**Install R packages**
    
- Open RStudio
- Install packages from the Comprehensive R Archive Network (CRAN)  and GitHub by copying and pasting the following lines of code into the console. 
    
```{r, eval=FALSE}
# Install packages from CRAN
cran_packages <- c("bsicons", "bslib", "curl", "devtools", "dplyr", "DT", "ggplot2", "pagedown", 
                   "randomForest", "rgl", "sessioninfo", "shiny","shinyBS", 
                   "shinycssloaders", "shinyjs")
for (pkg in cran_packages) {
  install.packages(pkg)
}

# Install packages from GitHub
github_packages <- c("heike/bulletxtrctr", "heike/x3ptools")
for (pkg in github_packages) {
  devtools::install_github(pkg)
}
```
    

## Walkthrough

The app includes 3d scans from the Hamby-Brundage bullet set #44 provided by CSAFE so you can practice the workflow. Hereâ€™s a step-by-step example:

### Launch the app

- Open RStudio 
- Open the BulletAnalyzr R project
    - Click Open Project in the top-right corner
    - Select the bulletAnalyzer-main folder that you unzipped during installation
    - Select the RStudio project File named rstudio.Rproj
- In the bottom-right panel of RStudio, navigate to the app folder ![](www/readme-app-folder.png)
- Open the server.R file
- Click Run App ![](www/readme-run-app.png)
- The start page will appear
- Click Begin 

    ![](www/readme-welcome.png)


### Upload the bullets

- Upload the first bullet.
    - Click Browse and navigate to: bulletAnalyzr-main/examples/Hamby-44/barrel 1/Bullet 1
    - Select all 6 files in this folder. Each x3p file is an image of a bullet land engraved area.
    - Give the bullet a name (e.g., Bullet 1).
    - Add it to the Comparison List.
- Upload the second bullet.
    - Repeat the same process for the Bullet 2 images: bulletAnalyzr-main/examples/Hamby-44/barrel 1/Bullet 2.

### Adjust the crosscut location

BulletAnalyzr attempts to identify suitable crosscut locations. The crosscuts are displayed as light grey lines on the lands.

- Adjust the crosscuts for Bullet 1
    - Select Bullet 1 from the drop-down menu if it isn't already selected 
    - Use the sliders to adjust the crosscuts if needed.
    - Click Finalize Crosscut when satisfied.
- Adjust the crosscuts for Bullet 2
    - Select Bullet 2 from the drop-down menu.
    - Use the sliders to adjust the crosscuts if needed.
    - Click Finalize Crosscut when satisfied.
- When both bullets are ready, click Compare Bullets.

### Adjust the groove placements

In order to capture the full land, the scans also contain parts of the grooves. BulletAnalyzr needs to remove the grooves before further processing. The app attempts to locate the grooves on the crosscut profile, but manual adjustment is sometimes required. 

- Adjust the groove on land 1 of Bullet 1.
    - Select Bullet 1 and Land 1 from the drop-down menus.
    - The vertical red lines on the crosscut profile plot indicate the left and right groove locations. Everything to the left of the left groove line and everything to the right of the right groove line will be discarded. ![](www/readme-grooves1.png)
    - Adjust the groove locations using the slider bars to keep as much of the land as possible. ![](www/readme-grooves2.png)
    - Click Save Grooves when satisfied.
- Repeat for all lands on both bullets.
-	Once grooves are defined, click Next Step.

### Comparison results report

- The output page will display the comparison results.
- Each section at the bottom can be expanded to show more detailed information.
- Click Download Report to download a copy of the report.
